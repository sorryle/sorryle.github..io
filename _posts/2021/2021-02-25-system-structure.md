---
layout: post
title: 系统结构第四章-高速缓冲器
category: 自考计算机科学与技术
tags: [系统结构]
excerpt: 系统结构第四章-高速缓冲器算法，Cache的替换算法，写入，一致性，缺失率，使用Cache提升性能的倍数
typora-root-url: ..
---







### Cache的替换算法

> 直接映像的情况下，Cache块有数据就直接替换，没有数据就把内存的数据放入其中
>
> Cache的替换算法主要是对全映像，组映像进行一个操作

**随机法：**`Cache`的空间不足时，从内存中取数据到`Cache`

**FIFO/先进先出算法:**先加载进`Cache`的数据先替换，后加载的后替换

**LRU/最近最少使用算法:**每次加载数据进`Cache`时，对最近最少使用的`Cache`块打个标记，然后`Cache`满了的时候，直接替换掉标记的`Cache`块



#### 写入

> CPU写入数据到Cache的策略

**写回法：**`CPU`要写入数据到`Cache`，等数据积攒到一定量或者要替换时在写入`Memory`中

**写直达法：**`CPU`每次要写入数据到`Cache`，就把数据一起写入`Memory`中



### 一致性

> 当CPU是多核数量的情况下，每个核都配置一个Cache。
>
> 若是CPU1对Cache1进行了修改，并且写入Memory中。
>
> CPU2中的Cache2数据没有进行更新，那就发生了数据不一致，所以需要解决。

**写作废协议（作废法）：**`CPU1`写入数据时，把`Cache2`的该数据的有效位作废

**写更新协议（播写法）：**`CPU1`写入数据时，把`Cache2`的该数据的一起更新



**缺失率：**`CPU`访问`Cache`没获取到数据的几率

- 组的数量一样时，`Cache`块的容量越大，命中率越高，缺失率越低。

- 块的容量一样时，`Cache`组的数量越多，命中率越高，缺失率越低。



### Cache性能分析

设$t_c$为`Cache`的访问时间，$t_m$为`memory`访问时间，为访`Cache`的命中率

使用Cache提升性能的倍数:
$$
p=\frac{t_m}{t_a}=\frac{t_m}{H_c \times t_c + (1-H_c) t_m}=\frac{1}{1-(1-t_c /t_m) H_c}
$$
​		

